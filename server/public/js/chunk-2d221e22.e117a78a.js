(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d221e22"],{cbf3:function(t,o,e){"use strict";e.r(o);var c=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"about"},[e("RegisterInvoice")],1)},n=[],i=function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("v-container",[e("v-form",[e("v-row",[e("v-col",{attrs:{cols:"true"}},[e("v-text-field",{attrs:{counter:10,label:"UPC",required:"",clearable:""},model:{value:t.upc,callback:function(o){t.upc=o},expression:"upc"}})],1),e("v-col",{attrs:{cols:"true"}},[e("v-text-field",{attrs:{counter:10,label:"Cantidad",required:"",clearable:""},model:{value:t.amount,callback:function(o){t.amount=o},expression:"amount"}})],1),e("v-col",{attrs:{sm:"1"}},[e("v-btn",{attrs:{elevation:"2",rounded:"","x-large":""},on:{click:t.addProduct}},[e("v-icon",{attrs:{dark:""}},[t._v(" mdi-plus ")])],1)],1)],1),t.productList.length>0?e("v-row",[e("v-col",[e("v-card",[t.docId?e("v-card-title",[t._v(t._s(t.docId)+" "),e("v-icon",{staticStyle:{"margin-left":"1rem"},attrs:{type:"button",color:"primary",large:""},on:{click:t.downloadTsv}},[t._v("mdi-download")])],1):t._e(),e("v-list",{attrs:{subheader:"","two-line":""}},[e("v-list-item-group",t._l(t.productList,(function(o){return e("v-list-item",{key:o.id},[e("v-list-item-content",[e("v-list-item-title",[t._v(t._s(o.upc))]),e("v-list-item-subtitle",[t._v(t._s(o.amount))])],1),e("v-list-item-action",[e("v-btn",{on:{click:function(e){return t.deleteProduct(o.id)}}},[e("v-icon",{attrs:{color:"grey lighten-1"}},[t._v("mdi-minus")])],1)],1)],1)})),1)],1)],1)],1)],1):t._e()],1),e("a",{staticStyle:{display:"none"},attrs:{id:"download",href:"",src:""}})],1)},l=[],a=e("f9f2"),d={name:"RegisterInvoice",data:function(){return{docId:null,upc:null,amount:null,productList:[]}},methods:{addProduct:function(){var t=this;if(null!==this.upc&&null!==this.amount){var o=a["b"].firestore.FieldValue.serverTimestamp(),e={upc:this.upc,amount:this.amount,createdAt:o};null===this.docId?a["a"].collection("invoices").add({createdAt:o}).then((function(o){t.docId=o.id,t.getProductList(),a["a"].collection("invoices").doc(t.docId).collection("invoice").doc().set(e).then((function(){t.upc=null,t.amount=null}))})).catch((function(t){console.error("Error adding document: ",t)})):a["a"].collection("invoices").doc(this.docId).collection("invoice").doc().set(e).then((function(){t.upc=null,t.amount=null}))}},deleteProduct:function(t){a["a"].collection("invoices").doc(this.docId).collection("invoice").doc(t).delete()},getProductList:function(){var t=this;null!==this.docId&&a["a"].collection("invoices").doc(this.docId).collection("invoice").orderBy("createdAt","asc").onSnapshot((function(o){var e=[];o.forEach((function(t){var o=t.data();o.id=t.id,e.push(o)})),t.productList=e}))},downloadTsv:function(){if(!(this.productList.length<=0)){var t=document.getElementById("download"),o="";this.productList.forEach((function(t){o+="".concat(t.upc,"\t").concat(t.amount,"\n")})),t.href="data:text/tab-separated-values,"+encodeURIComponent(o),t.download="".concat(this.docId,".txt"),t.click()}}},created:function(){var t=this.$route.params.id;t&&(this.docId=t),this.getProductList()}},r=d,u=e("2877"),s=Object(u["a"])(r,i,l,!1,null,null,null),v=s.exports,m={name:"Invoice",components:{RegisterInvoice:v}},p=m,f=Object(u["a"])(p,c,n,!1,null,null,null);o["default"]=f.exports}}]);
//# sourceMappingURL=chunk-2d221e22.e117a78a.js.map